!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=175)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t.filename=(0,n.default)(e);const o=o=>{if(!(o in t))throw new Error(`${o} not found in config dirname: ${e} id: ${t.id}`)};!1 in t&&(t.gmOnly=!1);return o("id"),o("filename"),t};var n=function(e){return e&&e.__esModule?e:{default:e}}(o(3))},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={canvas:"Canvas",exportImport:"Exporting/Importing",freedom:"Libre",initiative:"Initiative",token:"Token",journal:"Journal",misc:"Misc."}},,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=(e=>{const t=e.replace(/\\/g,"/").split("/");if(t.length<=0)throw new Error("Invalid dirname given.");return t[t.length-1]+".js"})},,,function(e,t,o){"use strict";t.__esModule=!0;var n=o(8);t.copy=function(e,t){var o=Object.assign({},e);return t&&(o=Object.assign(o,t)),o};var i=function(e){if("currentTransform"in e)return e.currentTransform;if("getTransform"in e)return e.getTransform();if(e.mozCurrentTransform){var t=e.mozCurrentTransform;return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}};t.getTransform=i,t.nearly_format_file_url=function(e){var t="";try{var o=function(e,t){var o=e.indexOf(t);return o>0?e.substring(0,o):e},n=e.lastIndexOf("/");t=o(t=o(t=o(t=e.substring(n+1),"."),"?"),"#"),t=decodeURIComponent(t)}catch(o){t=e}return t};t.getRotation=function(e){var t=i(e),o=Math.atan2(t.b,t.a);return o<0&&(o+=2*Math.PI),o};t.findByIdAndRemove=function(e){var t=document.getElementById(e);t&&t.remove()};t.mapObj=function(e,t){return Object.keys(e).reduce(function(o,n){var i=t(e[n],n);return void 0!==i&&null!==i&&o.push(i),o},[])};t.safeCall=function(e){try{e()}catch(e){console.error(e)}};t.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};t.replaceAll=function(e,t,o){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),o)};t.safeParseJson=function(e){try{return JSON.parse(e)}catch(e){alert("File is not a valid JSON file.")}return null};t.readFile=function(e){return new Promise(function(t,o){if(e){var n=new FileReader;n.readAsText(e),n.onload=function(e){t(e.target.result)}}else o("No file given.")})};var a=function(){return chrome||browser};t.getBrowser=a;t.injectScript=function(e){console.log("Injecting "+e);var t=document.createElement("script");t.async=!1,t.src=a().extension.getURL(e),t.onload=function(){t.remove()},document.head.appendChild(t)};t.strIsNullOrEmpty=function(e){return null===e||void 0===e||e.length<=0||e.trim().length<=0};t.createCSSElement=function(e,t){var o=document.createElement("style");return o.innerHTML=e,o.id=t,o};t.getExtUrlFromPage=function(e,t){var o=void 0===t||null===t?1e3:t;return new Promise(function(t,i){try{var a=!1,r=function(){window.removeEventListener("message",s)},l=window.generateUUID(),s=function(e){e.origin===n.Config.appUrl&&e.data.r20esGivesResourceUrl&&e.data.r20esGivesResourceUrl.id===l&&(a=!0,r(),t(e.data.r20esGivesResourceUrl.url))};window.addEventListener("message",s);var d={resource:e,id:l};window.postMessage({r20esWantsResourceUrl:d},n.Config.appUrl),setTimeout(function(){try{a||(r(),i("Timed out after "+o+"ms"))}catch(e){i(e)}},o)}catch(e){i(e)}})}},,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;let n={};t.Config=n,n.appUrl="https://app.roll20.net",n.websiteFeatureUrlTemplate="https://justas-d.github.io/roll20-enhancement-suite/features#",n.website="https://justas-d.github.io/roll20-enhancement-suite/",n.discordInvite="https://discord.gg/pKxxvuM",n.contributeUrl="https://justas-d.github.io/roll20-enhancement-suite/contribute.html"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={Slider:"slider",Dropdown:"dropdown",Checkbox:"checkbox",Text:"string",Number:"number",Color:"color",MouseButtonIndex:"mouse_button_index"}},,,function(e,t,o){"use strict";t.__esModule=!0;var n=o(13),i=function(){var e=n.default();return"chrome"===e.name||"opera"===e.name};t.isChromium=i;t.doesBrowserNotSupportResponseFiltering=function(){var e=n.default();return console.log(e),!!i()||"firefox"===e.name&&e.versionNumber<57}},function(e,t,o){"use strict";o.r(t),function(e){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n=[["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["edge",/Edge\/([0-9\._]+)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["safari",/Version\/([0-9\._]+).*Safari/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/]],i=["Windows Phone","Android","CentOS",{name:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],a={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},r=new RegExp(["(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|","compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|","midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)","\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|","wap|windows ce|xda|xiino"].join(""),"i"),l=new RegExp(["1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|","ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|","avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|","cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|","ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|","g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|","hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|","i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|","kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])","|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|","mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|","n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|","op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|","po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|","raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|","se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|k\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|","so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|","tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|","veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|","w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-"].join(""),"i"),s=function(){function e(e,t,o){this.navigator=t,this.process=o,this.userAgent=e||(this.navigator?t.userAgent||t.vendor:"")}return e.prototype.detect=function(){if(this.process&&!this.userAgent){var e=this.process.version.slice(1).split(".").slice(0,3),t=Array.prototype.slice.call(e,1).join("")||"0";return{name:"node",version:e.join("."),versionNumber:parseFloat(e[0]+"."+t),mobile:!1,os:this.process.platform}}return this.userAgent||this.handleMissingError(),o({},this.checkBrowser(),this.checkMobile(),this.checkOs())},e.prototype.checkBrowser=function(){var e=this;return n.filter(function(t){return t[1].test(e.userAgent)}).map(function(t){var o=t[1].exec(e.userAgent),n=o&&o[1].split(/[._]/).slice(0,3),i=Array.prototype.slice.call(n,1).join("")||"0";return n&&n.length<3&&Array.prototype.push.apply(n,1===n.length?[0,0]:[0]),{name:String(t[0]),version:n.join("."),versionNumber:Number(n[0]+"."+i)}}).shift()},e.prototype.checkMobile=function(){var e=this.userAgent.substr(0,4);return{mobile:r.test(this.userAgent)||l.test(e)}},e.prototype.checkOs=function(){var e=this;return i.map(function(t){var o=t.name||t,n=e.getOsPattern(t);return{name:o,pattern:n,value:RegExp("\\b"+n.replace(/([ -])(?!$)/g,"$1?")+"(?:x?[\\d._]+|[ \\w.]*)","i").exec(e.userAgent)}}).filter(function(e){return e.value}).map(function(e){var t,o=e.value[0]||"";return e.pattern&&e.name&&/^Win/i.test(o)&&!/^Windows Phone /i.test(o)&&(t=a[o.replace(/[^\d.]/g,"")])&&(o="Windows "+t),e.pattern&&e.name&&(o=o.replace(RegExp(e.pattern,"i"),e.name)),o=o.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0].trim(),{os:o=/^(?:webOS|i(?:OS|P))/.test(o)?o:o.charAt(0).toUpperCase()+o.slice(1)}}).shift()},e.prototype.getOsPattern=function(e){var t=e;return("string"==typeof e?e:void 0)||t.pattern||t.name},e.prototype.handleMissingError=function(){throw new Error("Please give user-agent.\n> browser(navigator.userAgent or res.headers['user-agent']).")},e}();function d(e,t){return e(t={exports:{}},t.exports),t.exports}var u=d(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),c=d(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),f=(c.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),p=function(e){if(!f(e))throw TypeError(e+" is not an object!");return e},h=function(e){try{return!!e()}catch(e){return!0}},m=!h(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),y=u.document,g=f(y)&&f(y.createElement),v=!m&&!h(function(){return 7!=Object.defineProperty(function(e){return g?y.createElement(e):{}}("div"),"a",{get:function(){return 7}}).a}),w=Object.defineProperty,b={f:m?Object.defineProperty:function(e,t,o){if(p(e),t=function(e,t){if(!f(e))return e;var o,n;if(t&&"function"==typeof(o=e.toString)&&!f(n=o.call(e)))return n;if("function"==typeof(o=e.valueOf)&&!f(n=o.call(e)))return n;if(!t&&"function"==typeof(o=e.toString)&&!f(n=o.call(e)))return n;throw TypeError("Can't convert object to primitive value")}(t,!0),p(o),v)try{return w(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e}},_=m?function(e,t,o){return b.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,o))}:function(e,t,o){return e[t]=o,e},k={}.hasOwnProperty,M=function(e,t){return k.call(e,t)},O=0,T=Math.random(),x=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++O+T).toString(36))},A=d(function(e){var t=x("src"),o=Function.toString,n=(""+o).split("toString");c.inspectSource=function(e){return o.call(e)},(e.exports=function(e,o,i,a){var r="function"==typeof i;r&&(M(i,"name")||_(i,"name",o)),e[o]!==i&&(r&&(M(i,t)||_(i,t,e[o]?""+e[o]:n.join(String(o)))),e===u?e[o]=i:a?e[o]?e[o]=i:_(e,o,i):(delete e[o],_(e,o,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||o.call(this)})}),S=function(e,t,o){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(o){case 1:return function(o){return e.call(t,o)};case 2:return function(o,n){return e.call(t,o,n)};case 3:return function(o,n,i){return e.call(t,o,n,i)}}return function(){return e.apply(t,arguments)}},C=function(e,t,o){var n,i,a,r,l=e&C.F,s=e&C.G,d=e&C.S,f=e&C.P,p=e&C.B,h=s?u:d?u[t]||(u[t]={}):(u[t]||{}).prototype,m=s?c:c[t]||(c[t]={}),y=m.prototype||(m.prototype={});for(n in s&&(o=t),o)a=((i=!l&&h&&void 0!==h[n])?h:o)[n],r=p&&i?S(a,u):f&&"function"==typeof a?S(Function.call,a):a,h&&A(h,n,a,e&C.U),m[n]!=a&&_(m,n,r),f&&y[n]!=a&&(y[n]=a)};u.core=c,C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128;var j=C,E={}.toString,P=function(e){return E.call(e).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==P(e)?e.split(""):Object(e)},R=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},L=Math.ceil,I=Math.floor,N=Math.min,B=function(e){return e>0?N(function(e){return isNaN(e=+e)?0:(e>0?I:L)(e)}(e),9007199254740991):0},F=Array.isArray||function(e){return"Array"==P(e)},G=d(function(e){var t=u["__core-js_shared__"]||(u["__core-js_shared__"]={});(e.exports=function(e,o){return t[e]||(t[e]=void 0!==o?o:{})})("versions",[]).push({version:c.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),$=d(function(e){var t=G("wks"),o=u.Symbol,n="function"==typeof o;(e.exports=function(e){return t[e]||(t[e]=n&&o[e]||(n?o:x)("Symbol."+e))}).store=t})("species"),U=function(e,t){return new(function(e){var t;return F(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!F(t.prototype)||(t=void 0),f(t)&&null===(t=t[$])&&(t=void 0)),void 0===t?Array:t}(e))(t)},z=function(e,t){var o=1==e,n=2==e,i=3==e,a=4==e,r=6==e,l=5==e||r,s=t||U;return function(t,d,u){for(var c,f,p=function(e){return Object(R(e))}(t),h=D(p),m=S(d,u,3),y=B(h.length),g=0,v=o?s(t,y):n?s(t,0):void 0;y>g;g++)if((l||g in h)&&(f=m(c=h[g],g,p),e))if(o)v[g]=f;else if(f)switch(e){case 3:return!0;case 5:return c;case 6:return g;case 2:v.push(c)}else if(a)return!1;return r?-1:i||a?a:v}},W=function(e,t){return!!e&&h(function(){t?e.call(null,function(){},1):e.call(null)})},Y=z(2);j(j.P+j.F*!W([].filter,!0),"Array",{filter:function(e){return Y(this,e,arguments[1])}});c.Array.filter;var H=z(1);j(j.P+j.F*!W([].map,!0),"Array",{map:function(e){return H(this,e,arguments[1])}});c.Array.map;var V="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",K="["+V+"]",q=RegExp("^"+K+K+"*"),J=RegExp(K+K+"*$"),Z=function(e,t,o){var n={},i=h(function(){return!!V[e]()||"​"!="​"[e]()}),a=n[e]=i?t(X):V[e];o&&(n[o]=a),j(j.P+j.F*i,"String",n)},X=Z.trim=function(e,t){return e=String(R(e)),1&t&&(e=e.replace(q,"")),2&t&&(e=e.replace(J,"")),e};Z("trim",function(e){return function(){return e(this,3)}});c.String.trim;var Q="undefined"!=typeof window?window.navigator:void 0,ee=void 0!==e?e:void 0;t.default=function(e){return new s(e,Q,ee).detect()}}.call(this,o(14))},function(e,t){var o,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function l(e){if(o===setTimeout)return setTimeout(e,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(e){o=a}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var s,d=[],u=!1,c=-1;function f(){u&&s&&(u=!1,s.length?d=s.concat(d):c=-1,d.length&&p())}function p(){if(!u){var e=l(f);u=!0;for(var t=d.length;t;){for(s=d,d=[];++c<t;)s&&s[c].run();c=-1,t=d.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];d.push(new h(e,t)),1!==d.length||u||l(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADJUSTABLE_OPACITY_PASSIVE_GM_LAYER_CONFIG_KEY=void 0;t.ADJUSTABLE_OPACITY_PASSIVE_GM_LAYER_CONFIG_KEY="passiveGMLayerOpacity"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DIALOG_OPEN_DELAY_KEY=void 0;t.DIALOG_OPEN_DELAY_KEY="DIALOG_OPEN_DELAY_KEY"},,,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={TABLE_ENTRY_ID_ATTRIBUTE:"r20es-set-entry-url-table-entry-id",TABLE_ID_ATTRIBUTE:"r20es-set-entry-url-table-id"}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={TableIdAttribute:"data-r20es-table-id"}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_FROM_ANIMATED_TOKEN_KEY=t.TOKEN_GET_URL=t.TOKEN_FROM_IMG_BUTTON_NAME=void 0;t.TOKEN_FROM_IMG_BUTTON_NAME="Create Token from URL";t.TOKEN_GET_URL="Copy Token Image URL";t.TOKEN_FROM_ANIMATED_TOKEN_KEY="r20es-is-animated-token"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ELEMENT_ID_BOOTSTRAP_FLASH_WORKAROUND_STYLE=t.MESSAGE_KEY_LOAD_MODULES=t.MESSAGE_KEY_CHROME_INJECTION_DONE=t.MESSAGE_KEY_DOM_LOADED=void 0;t.MESSAGE_KEY_DOM_LOADED="r20es_domLoaded";t.MESSAGE_KEY_CHROME_INJECTION_DONE="r20esChromeInjectionDone";t.MESSAGE_KEY_LOAD_MODULES="r20esLoadModules";t.ELEMENT_ID_BOOTSTRAP_FLASH_WORKAROUND_STYLE="r20es-bootstrap-flash-workaround-style"},,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=q(o(30)),i=q(o(31)),a=q(o(32)),r=q(o(33)),l=q(o(34)),s=q(o(35)),d=q(o(36)),u=q(o(37)),c=q(o(38)),f=q(o(39)),p=q(o(40)),h=q(o(41)),m=q(o(42)),y=q(o(43)),g=q(o(44)),v=q(o(45)),w=q(o(46)),b=q(o(47)),_=q(o(48)),k=q(o(49)),M=q(o(50)),O=q(o(51)),T=q(o(52)),x=q(o(53)),A=q(o(54)),S=q(o(55)),C=q(o(56)),j=q(o(57)),E=q(o(58)),P=q(o(59)),D=q(o(60)),R=q(o(61)),L=q(o(62)),I=q(o(63)),N=q(o(64)),B=q(o(65)),F=q(o(66)),G=q(o(67)),$=q(o(68)),U=q(o(69)),z=q(o(70)),W=q(o(71)),Y=q(o(72)),H=q(o(73)),V=q(o(74)),K=q(o(75));function q(e){return e&&e.__esModule?e:{default:e}}let J={};const Z=e=>J[e.id]=e;Z(z.default),Z(H.default),Z(Y.default),Z(U.default),Z($.default),Z(G.default),Z(F.default),Z(I.default),Z(n.default),Z(L.default),Z(S.default),Z(i.default),Z(a.default),Z(r.default),Z(l.default),Z(s.default),Z(N.default),Z(d.default),Z(u.default),Z(D.default),Z(c.default),Z(f.default),Z(p.default),Z(h.default),Z(R.default),Z(m.default),Z(E.default),Z(y.default),Z(g.default),Z(v.default),Z(w.default),Z(b.default),Z(_.default),Z(B.default),Z(k.default),Z(P.default),Z(M.default),Z(C.default),Z(O.default),Z(T.default),Z(x.default),Z(j.default),Z(W.default),Z(A.default),Z(V.default),Z(K.default);var X=J;t.default=X},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"alternativeRadialMenu",name:"Alternative Token Radial Menu",media:{"radial.png":"Reworked radial menu","radial_min.png":"Compact version"},description:"Replaces the default token radial token menu with a more compact and simplistic one.",category:i.default.canvas,configView:{opacity:{type:a.default.Slider,display:"Opacity",sliderMin:0,sliderMax:1},superMinimal:{type:a.default.Checkbox,display:"Compact mode"},auto_width:{type:a.default.Checkbox,display:"Automatically space the left and right sides to not cover up the token."}},config:{opacity:1,superMinimal:!1,auto_width:!0}});t.default=l}).call(this,"src/modules/AlternativeRadialMenu")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(9)),a=r(o(1));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"animationDisable",name:"Disable Animations",description:"Disables animations: token radial menu opening, page toolbar menu opening/close.",category:a.default.canvas,media:{"no_radial_anim.webm":"No token radial menu animation"},mods:[{includes:"assets/app.js",find:'setTimeout(function(){$(e).addClass("open"),n.find(".button div.hasnumber").textfill(20)},30*r),r++',patch:';\n            if(window.r20es && window.r20es.shouldDoCustomAnim && window.r20es.shouldDoCustomAnim("disableRadial")) { $(e).addClass("open");n.find(".button div.hasnumber").textfill(20);}\n            else { >>R20ES_MOD_FIND>>; }'},{includes:"assets/app.js",find:'setTimeout(function(){n.find(".button").addClass("animcomplete")},250)',patch:'1;\n            if(window.r20es && window.r20es.shouldDoCustomAnim && window.r20es.shouldDoCustomAnim("disableRadial")) { n.find(".button").addClass("animcomplete");}\n            else { >>R20ES_MOD_FIND>>; }'},{includes:"assets/app.js",find:"setTimeout(function(){t&&t.remove()},300)",patch:'1;\n            if(window.r20es && window.r20es.shouldDoCustomAnim && window.r20es.shouldDoCustomAnim("disableRadial")) { t && t.remove(); }\n            else { >>R20ES_MOD_FIND>>; }'},{includes:"assets/app.js",find:'_.delay(function(){i.addClass("open")})',patch:'1;\n            if(window.r20es && window.r20es.shouldDoCustomAnim && window.r20es.shouldDoCustomAnim("disableRadial")) { i.addClass("open"); }\n            else { >>R20ES_MOD_FIND>>; }'},{includes:"assets/app.js",find:'t.animate({top:"-1px"},300).removeClass("closed"),',patch:'t.animate({top:"-1px"},\n      (window.r20es && window.r20es.shouldDoCustomAnim && window.r20es.shouldDoCustomAnim("disablePageToolbar")) ? 1 : 300,\n    ).removeClass("closed"),'},{includes:"assets/app.js",find:'t.animate({top:"-"+t.height()+"px"},300,function(){t.addClass("closed"),$("#page-toolbar .pages").hide(),_.delay(function(){$("#page-toolbar .pages input").trigger("blur")})})',patch:'t.animate({top:"-"+t.height()+"px"},\n      (window.r20es && window.r20es.shouldDoCustomAnim && window.r20es.shouldDoCustomAnim("disablePageToolbar")) ? 1 : 300,\n      function(){t.addClass("closed"),$("#page-toolbar .pages").hide(),_.delay(function(){$("#page-toolbar .pages input").trigger("blur")})})'}],configView:{disableRadial:{type:i.default.Checkbox,display:"Disable token radial button menu animations"},disablePageToolbar:{type:i.default.Checkbox,display:"Disable page toolbar animations"}},config:{disableRadial:!1,disablePageToolbar:!1}});t.default=l}).call(this,"src/modules/AnimationDisable")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"autoPingNextToken",name:"Ping Visible Token",description:"When advancing initiative, this module will automatically ping the next token only if it is in the player token layer.",category:i.default.initiative,gmOnly:!0,media:{"ping_token.webm":"Automated pinging"},includes:"assets/app.js",find:"e.push(t[0]);",patch:"e.push(t[0]);if(window.r20es && window.r20es.pingInitiativeToken) {window.r20es.pingInitiativeToken(e[0]);}"});t.default=r}).call(this,"src/modules/AutoPingNextToken")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"autoSelectNextToken",name:"Select Token",description:"When advancing initiative, this module will automatically select the next token in the initiative order.",category:i.default.initiative,gmOnly:!0,media:{"select_token.webm":"Automated token selection"},includes:"assets/app.js",find:"e.push(t[0]);",patch:"e.push(t[0]);if(window.r20es && window.r20es.selectInitiativeToken) { window.r20es.selectInitiativeToken(e[0]);}"});t.default=r}).call(this,"src/modules/AutoSelectNextToken")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"autoSortInitiative",name:"Automatically Sort Initiative",description:"Automatically sorts initiative order when a new token has been added to it by any player. After the list has been sorted, it is reorganized so that the token that was first in the list before the sort is still the first in the list after the sort.",category:i.default.initiative,gmOnly:!0,media:{"sort_init.webm":"Initiative being sorted automatically."},configView:{sortBy:{display:"Sort-By",type:a.default.Dropdown,dropdownValues:{0:"Numerically: Ascending",1:"Numerically: Descending",2:"Alphabetically: A-Z",3:"Alphabetically: Z-A",card:"By Card/Suit"}},respectFirstTokenPosition:{display:"Respect the position of the current token in the order",type:a.default.Checkbox}},config:{sortBy:1,respectFirstTokenPosition:!0}});t.default=l}).call(this,"src/modules/AutoSortInitiative")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"bulkMacros",name:"Bulk Macros",description:'Adds a "Bulk Macros" option to the token right click menu which lists macros that can be rolled for the whole selection in bulk.',category:i.default.token,gmOnly:!0,media:{"bulk_macro.webm":"Rolling initiative for 3 tokens at once"},configView:{delayBetweenRolls:{type:a.default.Number,display:"The milliseconds that will be waited in between macro rolls for tokens. If you're having issues with API scripts, tweak this value. A good start is 100."},reselectAfter:{type:a.default.Checkbox,display:"Reselect tokens after rolling? Disabling this might fix issues with API scripts."}},config:{delayBetweenRolls:0,reselectAfter:!0}});t.default=l}).call(this,"src/modules/BulkMacro")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"changeRepresentsIdWhenDuplicating",name:'Reassign "Represents" when duplicating',description:'When duplicating a character in the journal and if that character has a default token, this module will reassign the "Represents" value of that default token to the newly duplicated character.',category:i.default.token,gmOnly:!0,includes:"assets/app.js",find:"o.defaulttoken=e.model._blobcache.defaulttoken",patch:"o.defaulttoken = ((window.r20es && window.r20es.replaceIdOnDupe) ? window.r20es.replaceIdOnDupe(e, n) : e.model._blobcache.defaulttoken)"});t.default=r}).call(this,"src/modules/ChangeIdWhenDuplicating")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"characterImportExport",name:"Character Importer/Exporter",description:"Provides character importing (in the journal) and exporting (in the journal and on sheets).",category:i.default.exportImport,media:{"char_import.png":"Journal widget","sheet_export.png":"Sheet tab"}});t.default=r}).call(this,"src/modules/CharacterIO")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"activeLayerHud",name:"Display Current Layer on Canvas",description:"Displays the current edit layer and whether the select tool is active.",media:{"gm_bg.png":"GM layer identifier","map_bg.png":"Page layer identitifer","tokens_bg.png":"Player token layer identifier"},category:i.default.canvas,gmOnly:!0,configView:{size:{type:a.default.Number,display:"Size"},globalOpacity:{type:a.default.Slider,display:"Global opacity",sliderMin:0,sliderMax:1},showNotSelecting:{type:a.default.Checkbox,display:'Show "Not selecting!" when the current tool is not the select tool?'},notSelectingOpacity:{type:a.default.Slider,display:'"Not selecting" box opacity',sliderMin:0,sliderMax:1},backgroundOpacity:{type:a.default.Slider,display:"Background opacity",sliderMin:0,sliderMax:1},textFillOpacity:{type:a.default.Slider,display:"Text shadow opacity",sliderMin:0,sliderMax:1},textFillColor:{type:a.default.Color,display:"Text shadow color"},textOutlineOpacity:{type:a.default.Slider,display:"Text outline opacity",sliderMin:0,sliderMax:1},textOutlineColor:{type:a.default.Color,display:"Text outline color"},corner:{type:a.default.Dropdown,display:"Position",dropdownValues:{bottomRight:"Bottom Right",bottomLeft:"Bottom Left",topRight:"Top Right",topLeft:"Top Left"}}},config:{size:26,showNotSelecting:!0,notSelectingOpacity:1,globalOpacity:.75,backgroundOpacity:1,textFillOpacity:1,textFillColor:[255,255,255],textOutlineOpacity:1,textOutlineColor:[0,0,0],corner:"bottomRight"},includes:"assets/app.js",find:"function setMode(e){",patch:"function setMode(e){if(window.r20es && window.r20es.setModePrologue) {window.r20es.setModePrologue(e);}"});t.default=l}).call(this,"src/modules/DrawCurrentLayer")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"duplicateInJournalContextMenu",name:'"Duplicate" in the Journal Context Menu',description:'Adds a "Duplicate" entry, functioning as a shortcut to duplicate button found in the edit page of sheets, to the context menu of items found in the journal.',category:i.default.journal,gmOnly:!0,media:{"duplicate.png":"The duplicate button"},includes:"assets/app.js",find:'$("#journalitemmenu ul").on(mousedowntype,"li[data-action-type=showtoplayers]"',patch:'$("#journalitemmenu ul").on(mousedowntype, "li[data-action-type=r20esduplicate]",() => {if(window.r20es && window.r20es.onJournalDuplicate) window.r20es.onJournalDuplicate($currentItemTarget.attr("data-itemid"))}),\n$("#journalitemmenu ul").on(mousedowntype,"li[data-action-type=showtoplayers]"'});t.default=r}).call(this,"src/modules/DuplicateButton")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"exposeD20",force:!0,includes:"assets/app.js",find:"getPointer,degreesToRadians;",patch:"getPointer,degreesToRadians;window.d20=d20;window.exports=exports;",expectedPatchCount:2}},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"initiativeShortcuts",name:"Advance Initiative Shortcut",description:"Creates a shortcut for advancing (Ctrl+Right Arrow) in the initiative list. Advanced shortcuts must be enabled for this to work. See https://wiki.roll20.net/Advanced_Shortcuts",category:i.default.initiative,gmOnly:!0});t.default=r}).call(this,"src/modules/InitiativeAdvanceShortcut")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"macroGeneratorBase",name:"Character Sheet Ability Macro Generator",description:'Places a "Generate" button in the Attributes & Abilities that will open up the generate ability macros dialog. Only certain character sheets are supported. If you\'d like to add your own sheet, submit a GitHub PR.',category:i.default.journal});t.default=r}).call(this,"src/modules/MacroGenerator")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"macroIO",name:"Player Macro Importer/Exporter",description:'Allows exporting and importing of player macros and the macro bar. Controls can be found in the "Collection" sidebar tab.',category:i.default.exportImport,media:{"macro_io.png":"Collection sidebar widget"}});t.default=r}).call(this,"src/modules/MacroIO")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"middleClickToTokenLayer",name:"Mouse Click to Switch to Token Layer",description:"This module allows the use of mouse clicking (default mouse3/scroll wheel) on a token. Doing so will switch the current edit layer to the layer of the token.",category:i.default.canvas,gmOnly:!0,media:{"middle_click.webm":"Middle-clicking on a token in the GM layer with select token option on when the current edit is player tokens ."},configView:{select:{display:"Also select token",type:a.default.Checkbox},switchToGmLayer:{display:"Allow switching to tokens in the GM layer.",type:a.default.Checkbox},switchToTokenLayer:{display:"Allow switching to tokens in the player token layer.",type:a.default.Checkbox},switchToMapLayer:{display:"Allow switching to tokens in the map layer.",type:a.default.Checkbox},switchToLightsLayer:{display:"Allow switching to tokens in the lights layer",type:a.default.Checkbox},switchToForegroundLayer:{display:"Allow switching to tokens in the betteR20 foreground layer",type:a.default.Checkbox,onlyWhenHasB20:!0},switchToWeatherLayer:{display:"Allow switching to tokens in the betteR20 weather layer",type:a.default.Checkbox,onlyWhenHasB20:!0},switchToBackgroundLayer:{display:"Allow switching to tokens in the betteR20 background layer",type:a.default.Checkbox,onlyWhenHasB20:!0},modAlt:{display:"Must hold down the ALT key",type:a.default.Checkbox},modShift:{display:"Must hold down the SHIFT key",type:a.default.Checkbox},modCtrl:{display:"Must hold down the CTRL key",type:a.default.Checkbox},modMeta:{display:"Must hold down the meta key",type:a.default.Checkbox},mouseButtonIndex:{display:"Mouse button index",type:a.default.MouseButtonIndex}},config:{select:!1,switchToGmLayer:!0,switchToTokenLayer:!0,switchToMapLayer:!1,switchToLightsLayer:!1,switchToForegroundLayer:!1,switchToWeatherLayer:!1,switchToBackgroundLayer:!1,modAlt:!1,modShift:!1,modCtrl:!1,modMeta:!1,mouseButtonIndex:1}});t.default=l}).call(this,"src/modules/MiddleClickSelect")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"autoFocusNextToken",name:"Move Camera to Token",description:"When advancing initiative, this module will move your camera to the next token in the initiative order. This camera movement is local, meaning other players will not have their camera moved.",category:i.default.initiative,gmOnly:!0,media:{"move_cam.webm":"Camera moving between 4 tokens"},includes:"assets/app.js",find:"e.push(t[0]);",patch:"e.push(t[0]);\n    if(window.r20es && window.r20es.moveCameraTo) { window.r20es.moveCameraTo(e[0]); }"});t.default=r}).call(this,"src/modules/MoveCameraToToken")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={id:"createFinalPageLoadEvent",force:!0,includes:"assets/app.js",find:'$("#loading-overlay").hide()',patch:'$("#loading-overlay").hide();if(window.r20es && window.r20es.onLoadingOverlayHide) window.r20es.onLoadingOverlayHide(); '};t.default=n},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"rollAndApplyHitDice",name:"Roll & Apply Hit Dice",description:'Adds a "Hit Dice" option to the canvas token context menu which will roll and apply hit dice for the selected group of tokens.',category:i.default.token,gmOnly:!0,media:{"hit_dice.webm":"Rolling & Applying hit dice for a single token then a group of 3."},configView:{diceFormulaAttribute:{display:"Hit dice formula attribute",type:a.default.Text},bar:{display:"HP Bar",type:a.default.Dropdown,dropdownValues:{bar1:"Bar 1",bar2:"Bar 2",bar3:"Bar 3"}},diceFormulaMacro:{display:"(Optional) Custom Roll.",type:a.default.Text},diceFormulaSumInline:{display:"(Optional) Custom roll: sum inline rolls. If unchecked, the value of the last inline roll will be used.",type:a.default.Checkbox}},config:{diceFormulaAttribute:"npc_hpformula",bar:"bar3",diceFormulaMacro:"",diceFormulaSumInline:!0}});t.default=l}).call(this,"src/modules/RollAndApplyHitDice")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(o(0));i(o(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)(e,{id:"pluginSettings",force:!0});t.default=a}).call(this,"src/modules/Settings")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(o(0));i(o(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)(e,{id:"sheetTabApi",force:!0});t.default=a}).call(this,"src/modules/SheetTabApi")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(24));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"importExportTable",name:"Table Importer/Exporter",description:'Provides rollable table importing and exporting. Supports TableExport format tables. Controls can be found in the "Collection" sidebar tab.',category:i.default.exportImport,gmOnly:!0,media:{"table_io.png":"Collection sidebar widget."},mods:[{includes:"assets/app.js",find:'this.$el.on("click",".deleterollabletable"',patch:`this.el.setAttribute("${a.default.TableIdAttribute}", this.model.get("id")),this.$el.on("click",".deleterollabletable"`}]});t.default=l}).call(this,"src/modules/TableIO")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(o(0));i(o(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)(e,{id:"tokenContextMenuApiModule",force:!0});t.default=a}).call(this,"src/modules/TokenContextMenuApi")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"tokenLayerDrawing",name:"Draw Token Layer on Tokens",description:"Draws an indicator at the bottom left of each token that indicates which layer it is on.",category:i.default.canvas,gmOnly:!0,media:{"token_mp.png":"A token in the map layer","token_tk.png":"A token in the player token layer","token_gm.png":"A token in the GM layer"},mods:[{includes:"assets/app.js",find:"this._drawNameplate(e)),e.restore(),this",patch:"\nthis._drawNameplate(e)),\ne.restore(),\n(window.r20es.tokenDrawBg && window.r20es.tokenDrawBg(e, this)),\nthis;\n"}],configView:{globalAlpha:{display:"Global opacity",type:a.default.Slider,sliderMin:0,sliderMax:1},backgroundOpacity:{display:"Background opacity",type:a.default.Slider,sliderMin:0,sliderMax:1},rotateAlongWithToken:{display:"Rotate overlay along with token",type:a.default.Checkbox},textStrokeWidth:{display:"Text outline width",type:a.default.Number,numberMin:0},textStrokeOpacity:{display:"Text stroke opacity",type:a.default.Slider,sliderMin:0,sliderMax:1},textStrokeColor:{display:"Text stroke color",type:a.default.Color},textFillOpacity:{display:"Text fill opacity",type:a.default.Slider,sliderMin:0,sliderMax:1},textFontSize:{display:"Font size",type:a.default.Number,numberMin:0},textFillColor:{display:"Text fill color",type:a.default.Color},drawOnGmLayer:{display:"Draw on tokens in the GM layer.",type:a.default.Checkbox},drawOnTokenLayer:{display:"Draw on tokens in the player token layer.",type:a.default.Checkbox},drawOnMapLayer:{display:"Draw on tokens in the map layer.",type:a.default.Checkbox},drawOnLightsLayer:{display:"Draw on tokens in the lights layer",type:a.default.Checkbox},drawOnForegroundLayer:{display:"Draw on tokens in the betteR20 foreground layer",type:a.default.Checkbox,onlyWhenHasB20:!0},drawOnWeatherLayer:{display:"Draw on tokens in the betteR20 weather layer",type:a.default.Checkbox,onlyWhenHasB20:!0},drawOnBackgroundLayer:{display:"Draw on tokens in the betteR20 background layer",type:a.default.Checkbox,onlyWhenHasB20:!0}},config:{globalAlpha:1,backgroundOpacity:.5,textStrokeWidth:2,textStrokeOpacity:1,textStrokeColor:[0,0,0],textFillOpacity:1,textFillColor:[255,255,255],textFontSize:18,rotateAlongWithToken:!1,drawOnGmLayer:!0,drawOnTokenLayer:!0,drawOnMapLayer:!0,drawOnLightsLayer:!0,drawOnWeatherLayer:!0,drawOnForegroundLayer:!0,drawOnBackgroundLayer:!0}});t.default=l}).call(this,"src/modules/TokenLayerDrawing")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"transparentPaperDivs",name:"Transparent Canvas UI Dialogs",description:"Provides a way to set the opacity of floating UI dialogs.",category:i.default.canvas,media:{"transparent_dialog.png":"A transparent edit token dialog."},configView:{opacity:{display:"Opacity",type:a.default.Slider,sliderMin:0,sliderMax:1}},config:{opacity:1}});t.default=l}).call(this,"src/modules/TransparentPaper")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{name:"Welcome",id:"welcomeScreen",force:!0,forceShowConfig:!0,category:i.default.misc,configView:{showWelcomePopup:{display:"Show welcome message.",type:a.default.Checkbox},showStartupGuide:{display:"Show startup guide",type:a.default.Checkbox},showChangelog:{display:"Show changelog",type:a.default.Checkbox}},config:{hasShownDiscordPoll:!1,showWelcomePopup:!0,showStartupGuide:!0,showChangelog:!0,previousVersion:""}});t.default=l}).call(this,"src/modules/Welcome")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"alternativePageToolbarMenu",name:"Alternative Page Toolbar Menu",description:"Replaces the default page toolbar menu with a more concise one. Right clicking the name of the page will enable you to edit it. Vivaldi users: double right-click to edit name.",category:i.default.canvas,media:{"page_toolbar.png":"Alternative page toolbar menu on the right side."},configView:{opacity:{type:a.default.Slider,display:"Opacity",sliderMin:0,sliderMax:1},location:{type:a.default.Dropdown,display:"Location",dropdownValues:{right:"Right",left:"Left"}}},config:{opacity:1,location:"right"},mods:[{includes:"assets/app.js",find:'e",axis:"x"',patch:'e"'},{includes:"assets/app.js",find:',axis:"x"}).addTouch()',patch:"}).addTouch()"},{includes:"assets/app.js",find:"<div class='pictos duplicate showtip' title='Duplicate Page'>;</div><div class='pictos settings showtip' title='Page Settings'>y</div></div>",patch:"<div class='pictos duplicate'>;</div><div class='pictos settings'>y</div></div>"}]});t.default=l}).call(this,"src/modules/AlternatePageToolbarMenu")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"tokenResize",name:"Token Resize",description:"Allows you to quickly resize map tokens to fit the canvas size or to fit a specific grid size.",category:i.default.token,gmOnly:!1,media:{"token_resize2.webm":"Two map tokens being resized to fit the canvas."},configView:{placeTopLeft:{type:a.default.Checkbox,display:"Position tokens in the top-left corner after resizing"},useUnits:{type:a.default.Checkbox,display:"Use map units (feet, meters, km, etc) instead of squares."}},config:{placeTopLeft:!0,useUnits:!1,lastSquareWidth:70,lastSquareHeight:70,lastNumSquaresX:25,lastNumSquaresY:25}});t.default=l}).call(this,"src/modules/TokenResize")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"hidePlayerList",name:"Hide Player List",description:"Hides the player list.",category:i.default.canvas,gmOnly:!1,config:{enabled:!1}});t.default=r}).call(this,"src/modules/HidePlayerList")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"characterTokenModifier",name:"Character Token Editor",description:"Adds a tab to character sheets that provides a quick way to create and modify character tokens.",category:i.default.token,media:{"token_editor.png":"The editor being used to view a Adult Brass Dragon token."}});t.default=r}).call(this,"src/modules/CharacterTokenModifier")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"seenadOverride",force:!0,includes:"/editor/startjs/",find:"d20ext.showGoogleAd();",patch:'window.d20ext.seenad = !0, $("#loading-overlay").find("div").hide(), window.currentPlayer && d20.Campaign.pages.length > 0 && d20.Campaign.handlePlayerPageChanges(), void $.get("/editor/startping/true");'}},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"nightMode",name:"Force Background Color",description:"Force a certain background. The night mode is deprecated in favor of RedReign's Dark Theme.",urls:{"You can find it here":"https://github.com/RedReign/Roll20-Dark-Theme"},category:i.default.canvas,configView:{backgroundColor:{display:"Background Color",type:a.default.Color}},config:{backgroundColor:[13,14,15],enabled:!1}});t.default=l}).call(this,"src/modules/NightMode")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"jukeboxIO",name:"Jukebox Importer/Exporter",description:'Allows exporting and importing of jukebox playlists. Controls can be found in the "Jukebox" sidebar tab.',category:i.default.exportImport});t.default=r}).call(this,"src/modules/JukeboxIO")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"arrowKeysCameraControls",name:"Arrow Key Camera Controls",description:"Allows the camera to be moved by pressing the arrow keys as long as a token is not selected",category:i.default.canvas});t.default=r}).call(this,"src/modules/ArrowKeysMoveCanvas")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(o(0)),i=l(o(1)),a=l(o(9)),r=o(19);function l(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)(e,{id:"autoOpenInitiativeTracker",name:"Open Turn Tracker On Initiative",description:"Automatically opens the turn tracker when somebody rolls initiative.",category:i.default.initiative,gmOnly:!0,configView:{[r.DIALOG_OPEN_DELAY_KEY]:{display:"Delay between opening the initiative dialog in milliseconds (low values may cause issues)",type:a.default.Number}},config:{[r.DIALOG_OPEN_DELAY_KEY]:500}});t.default=s}).call(this,"src/modules/AutoOpenInitiativeTracker")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,function(e){return e&&e.__esModule?e:{default:e}}(o(0)).default)(e,{id:"toolsMenu",force:!0});t.default=n}).call(this,"src/modules/ToolsMenu")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"scaleTokenNamesBySize",name:"Scale Token Names By Size",description:"Scales canvas token names proportionally by their size. Smaller tokens display smaller names while larger ones have large names.",category:i.default.canvas,mods:[{includes:"assets/app.js",find:'e.fillRect(...this._nameplate_data.position,...this._nameplate_data.size),e.fillStyle="rgb(0,0,0)",e.fillText(this._nameplate_data.name,0,this._nameplate_data.position[1]+i+this._nameplate_data.padding)',patch:'window.r20es && window.r20es.prepNameplateBack && window.r20es.prepNameplateBack(this, e), e.fillRect(...this._nameplate_data.position,...this._nameplate_data.size),e.fillStyle="rgb(0,0,0)",\n                    window.r20es && window.r20es.prepNameplateText && window.r20es.prepNameplateText(this, e), e.fillText(this._nameplate_data.name,0,this._nameplate_data.position[1]+i+this._nameplate_data.padding)'}],configView:{widthThreshold:{display:"The unit width of a token. Nameplates will not be scaled when a token has this width.",type:a.default.Number},scaleIfLarger:{display:"Scale nameplate if token width is larger than the unit width.",type:a.default.Checkbox},scaleIfSmaller:{display:"Scale nameplate if token is smaller than the unit width.",type:a.default.Checkbox}},config:{widthThreshold:70,scaleIfLarger:!1,scaleIfSmaller:!0}});t.default=l}).call(this,"src/modules/ScaleTokenNamesBySize")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"animatedBackground",name:"Animated Background",description:"Displays an animated background if the GM has one set up for the page. Setup can be found in the top-left corner, look for a orange film button.",category:i.default.canvas,media:{"animated_bg.webm":"Setup & usage"},config:{muteAudio:!1,audioVolume:.1,video_history:[]},configView:{muteAudio:{display:"Mute Audio?",type:a.default.Checkbox},audioVolume:{display:"Audio Volume",type:a.default.Slider,sliderMin:0,sliderMax:1}},mods:[{includes:"assets/app.js",find:"updateCanvasZoom:()=>d20.engine.canvasZoom=n.canvasZoom",patch:"updateCanvasZoom:()=> {\n            if(window.r20es && window.r20es.onZoomChange) {\n              window.r20es.onZoomChange(e);\n            }\n            d20.engine.canvasZoom = n.canvasZoom;\n          }"}]});t.default=l}).call(this,"src/modules/AnimatedBackgroundLayer")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"rememberTextToolSettings",name:"Remember Text Tool Settings",description:"Remembers the last used settings for the text tool.",category:i.default.canvas,config:{copyTextSettingsOnSelect:!1,color:"rgb(0,0,0)",size:16,font:"Arial"},configView:{copyTextSettingsOnSelect:{display:"Mirror selected text settings?",type:a.default.Checkbox},color:{display:"Current Text Color",type:a.default.Text},size:{display:"Current Text Size",type:a.default.Number},font:{display:"Current Text Font",type:a.default.Text}},mods:[{includes:"assets/app.js",find:'"text"==t.type&&(console.log(t.model.get("font_size"))',patch:"if((window.r20es && window.r20es.copyTextSettingsOnSelect) || !window.r20es) >>R20ES_MOD_FIND>>"},{includes:"assets/app.js",find:'$("#font-size").val(r).trigger("keyup"),$("#font-color").val(s).trigger("change-silent"),$("#font-family").val(a);',patch:"if((window.r20es && window.r20es.copyTextSettingsOnSelect) || !window.r20es) { >>R20ES_MOD_FIND>> }"}]});t.default=l}).call(this,"src/modules/RememberTextToolSettings")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(o(0)),i=l(o(1)),a=l(o(9)),r=o(18);function l(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)(e,{id:"adjustableOpacity",name:"Adjustable GM Layer opacity",description:"Allows adjusting the opacity of the GM layer.",category:i.default.canvas,configView:{[r.ADJUSTABLE_OPACITY_PASSIVE_GM_LAYER_CONFIG_KEY]:{type:a.default.Slider,display:"GM Layer opacity",sliderMin:0,sliderMax:1}},config:{enabled:!1,[r.ADJUSTABLE_OPACITY_PASSIVE_GM_LAYER_CONFIG_KEY]:1}});t.default=s}).call(this,"src/modules/AdjustableOpacity")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=o(25);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"tokenFromUrl",name:"Create Token From URL",description:`Allows creating tokens on the canvas by right-clicking the canvas and pressing "${a.TOKEN_FROM_IMG_BUTTON_NAME}"`,category:i.default.freedom});t.default=l}).call(this,"src/modules/TokenFromImg")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"disablePlayerDrawing",name:"Disable Player Drawing",description:"Disables the drawing/text tools for certain players. Only the GM needs to have the extension installed for this to work.",category:i.default.canvas,gmOnly:!0,media:{"disable_drawing.png":"Disable/Enable drawing permission button"}});t.default=r}).call(this,"src/modules/DisablePlayerDrawings")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(23));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"setTableEntryAvatarByUrl",name:"Set Rollable Table Avatar By Url",description:"Allows setting the images/avatars of rollable table entries by an image url.",category:i.default.misc,media:{"table_entry_by_url.png":"Use this button in the table entry dialog."},mods:[{includes:"assets/app.js",find:'this.$el.on("click",".deleteitem",function(){',patch:`this.el.setAttribute("${a.default.TABLE_ID_ATTRIBUTE}", e.model.collection.rollabletable.id),this.el.setAttribute("${a.default.TABLE_ENTRY_ID_ATTRIBUTE}", e.model.id),>>R20ES_MOD_FIND>>`}]});t.default=l}).call(this,"src/modules/SetTableEntryAvatarByUrl")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{id:"libreAudio",name:"Libre Audio",description:"Allows creation and playback of tracks via their URL. Removes the 16 listener cap on My Audio Tracks. Refreshing the page is recommended after disabling/enabling this module in order to avoid issues.",category:i.default.freedom,media:{"libre_audio.png":"Add by URL button"},mods:[{includes:"assets/app.js",find:'"/audio_library/play/"+campaign_id+"/"+o.split("-")[0]',patch:'((window.r20es && window.r20es.canPlaySound && window.r20es.canPlaySound(n)) ? o : "/audio_library/play/"+campaign_id+"/"+o.split("-")[0])'},{includes:"assets/app.js",find:'if(d20.Campaign.players.filter(function(e){return e.get("online")}).length>15)return t.stopAllTracks(),void(0===$("#myaudiocap").length&&($("#jukeboxwhatsplaying").after("<div id=\'myaudiocap\' class=\'warning\'>"+i18n("my_audio_cap","You\'ve exceeded the maximum active game size for My Audio tracks. You may continue other audio track types. You can find more information on the <a href=\'https://wiki.roll20.net/Jukebox\'>Roll20 Wiki</a>.")+"<span id=\'dismiss_myaudiocap\' class=\'ui-icon ui-icon-closethick\'>close</span></div>"),$("#dismiss_myaudiocap").on("click",function(){$("#myaudiocap").remove()})));',patch:""}]});t.default=r}).call(this,"src/modules/LibreAudio")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"tokenBarPositionAdjust",name:"Token Status Display Adjustments",description:"Allows adjusting how status icons are displayed on tokens.",category:i.default.token,media:{"adjusted_token_status.png":"Idle & opaque status icons displayed outside of the token."},mods:[{includes:"assets/app.js",find:"this._positionAndScaleStatusIcons(r,n.length),e.save(),",patch:"\nif(window.r20es.statusDraw) { \n    if(!window.r20es.statusDraw(e, this, n, r)) { \n        return;\n    } \n} \nelse { \n    this._positionAndScaleStatusIcons(r,n.length);\n    e.save();\n}\n"}],configView:{idle_status_icon_opacity:{display:"Idle status icon alpha (when the token is not selected)",type:a.default.Slider,sliderMin:0,sliderMax:1},active_status_icon_opacity:{display:"Selected status icon alpha",type:a.default.Slider,sliderMin:0,sliderMax:1},position_status_icons_outside_the_token:{display:"Place the status icons outside of the token.",type:a.default.Checkbox}},config:{idle_status_icon_opacity:1,active_status_icon_opacity:1,position_status_icons_outside_the_token:!1}});t.default=l}).call(this,"src/modules/TokenBarPositionAdjust")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(0)),i=r(o(1)),a=r(o(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(e,{id:"perfImprovements",name:"Performance Improvements",description:"Attempts to improve performance.",category:i.default.misc,config:{disable_frame_recorder:!0},configView:{disable_frame_recorder:{display:"Disable Renderer Profiler (if present)",type:a.default.Checkbox}}});t.default=l}).call(this,"src/modules/PerformanceImprovements")},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o(0)),i=a(o(1));a(o(9));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,n.default)(e,{name:"Chrome Update Checker",id:"chromeUpdateChecker",description:"Automatically checks for new updates (Chrome only).",category:i.default.misc});t.default=r}).call(this,"src/modules/ChromeUpdateChecker")},,,,,,,,,,,,,,,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectHooks=t.getHooks=void 0;t.getHooks=((e,t)=>{let o=[];const n=(e,n)=>{e.includes&&t.includes(e.includes)&&e.find&&e.patch&&o.push({mod:e,hook:n})};for(let t in e){let o=e[t];if(o.mods)for(let e of o.mods)n(e,o);else n(o,o)}return o});t.injectHooks=((e,t,o)=>{if(t.length<=0)return e;for(let n of t){const t=n.mod,i=o(t.patch,">>R20ES_MOD_FIND>>",t.find);console.log(`REPLACING: Find: ${t.find} Patch: ${i}`),e=o(e,t.find,i)}return e})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,o){"use strict";var n=d(o(29)),i=o(6),a=o(12),r=d(o(176)),l=o(26),s=o(91);function d(e){return e&&e.__esModule?e:{default:e}}if((0,a.doesBrowserNotSupportResponseFiltering)()){const e=e=>{const t=e.url;return!!t.startsWith("https://app.roll20.net/editor/setcampaign/")||("https://app.roll20.net/editor/"===t||("https://app.roll20.net/editor"===t||(!!t.startsWith("https://app.roll20.net/editor?")||!!t.startsWith("https://app.roll20.net/editor#"))))},t=["https://app.roll20.net/v2/js/jquery","https://app.roll20.net/v2/js/jquery.migrate.js","https://app.roll20.net/js/featuredetect.js","https://app.roll20.net/v2/js/patience.js","https://app.roll20.net/editor/startjs","https://app.roll20.net/js/jquery-ui","https://app.roll20.net/js/d20/loading.js","https://app.roll20.net/assets/firebase","https://app.roll20.net/assets/base.js","https://app.roll20.net/assets/app.js","https://app.roll20.net/js/tutorial_tips.js"];let o={},n=[],a=!1;const s=()=>{a||(a=!0,o={},n=[],console.log("Beginning redirect queue."))},d=()=>{console.log("Ending redirect queue."),a=!1};(0,i.getBrowser)().runtime.onMessage.addListener((e,t,o)=>{e[l.MESSAGE_KEY_DOM_LOADED]&&(d(),console.log("Received MESSAGE_KEY_DOM_LOADED from content script, responding with redirectQueue:",n),o(n))}),window.requestListener=function(i){if(e(i))console.log("Editor, blocking:",i.url,i),s();else if("script"===i.type)for(const e of t)if(i.url.startsWith(e)){if(s(),!o[i.url])return console.log(`queueing ${i.url}`),n.push(i.url),o[i.url]=!0,{cancel:!0};console.log(`not queueing request due to alreadyRedirected: ${i.url}`,i);break}};{const t=t=>{if(!e(t))return;console.log("Editor, headers:",t.url,t),s(),console.log(`HEADER CALLBACK (processing headers) for ${t.url}`,t);const o=JSON.parse(JSON.stringify(t.responseHeaders));let n=o.length;for(;n-- >0;){const e=o[n],t=e.name.toLowerCase();if("content-security-policy"===t){e.value+=" blob:",console.log("!!MODIFIED HEADERS!!");break}console.log(`ignoring header ${t}`)}return{responseHeaders:o}};chrome.webRequest.onHeadersReceived.addListener(t,{urls:r.default},["blocking","responseHeaders"])}}else{const e=["https://app.roll20.net/v2/js/jquery","https://app.roll20.net/js/featuredetect.js","https://app.roll20.net/editor/startjs","https://app.roll20.net/js/jquery","https://app.roll20.net/js/d20/loading.js","https://app.roll20.net/assets/firebase","https://app.roll20.net/assets/base.js","https://app.roll20.net/assets/app.js","https://app.roll20.net/js/tutorial_tips.js"],t=t=>void 0!==e.find(e=>t.startsWith(e));window.requestListener=function(e){const o=t(e.url);if(console.log(`${o}: ${e.url}`),!o)return;const a=(0,s.getHooks)(n.default,e.url),r=(0,i.getBrowser)().webRequest.filterResponseData(e.requestId),l=new TextDecoder("utf-8");let d=`console.log("running ${e.url}");`;r.ondata=(e=>{d+=l.decode(e.data,{stream:!0})}),r.onstop=(e=>{const t=(0,s.injectHooks)(d,a,i.replaceAll);r.write((new TextEncoder).encode(t)),r.close()})}}(0,i.getBrowser)().webRequest.onBeforeRequest.addListener(window.requestListener,{urls:["*://app.roll20.net/*"]},["blocking"]),console.log("window.r20es Background hook script initialized")},function(e,t){e.exports=["https://app.roll20.net/editor","https://app.roll20.net/editor/","https://app.roll20.net/editor/#*","https://app.roll20.net/editor#*","https://app.roll20.net/editor/?*","https://app.roll20.net/editor?*"]}]);